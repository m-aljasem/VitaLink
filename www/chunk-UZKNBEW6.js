import{a as Z}from"./chunk-UFNSOT4R.js";import{a as Q}from"./chunk-BRRUA5UT.js";import{a as J}from"./chunk-ZL5SRYO7.js";import{b as q}from"./chunk-FEUMV7UB.js";import{$ as V,A as c,Aa as H,Ba as U,F as r,G as _,H as S,J as h,Ja as j,K as v,Ka as Y,L as I,M as d,N as p,O as E,Oa as X,P as B,Pa as z,Q as T,W as M,_ as P,ba as A,ha as R,i as g,j as m,l as t,n as y,na as D,o as N,oa as G,p as w,pa as W,qa as k,r as x,ra as L,s as n,t as o,u as C,va as F,wa as K,y as f,z as O}from"./chunk-IPUYINSA.js";import"./chunk-QFN5WVFN.js";import"./chunk-7KGURMOZ.js";import"./chunk-C6GHFGSM.js";import"./chunk-4BHFLD23.js";import"./chunk-MFJQPCIH.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{g as b}from"./chunk-2R6CW7ES.js";function te(l,u){if(l&1){let i=f();n(0,"div",4)(1,"h1"),r(2),d(3,"translate"),o(),n(4,"p"),r(5),d(6,"translate"),o(),n(7,"ion-button",5),O("click",function(){g(i);let e=c();return e.role="patient",m(e.nextStep())}),r(8),d(9,"translate"),o(),n(10,"ion-button",6),O("click",function(){g(i);let e=c();return e.role="provider",m(e.nextStep())}),r(11),d(12,"translate"),o()()}l&2&&(t(2),_(p(3,4,"ONBOARDING.ROLE_TITLE")),t(3),_(p(6,6,"ONBOARDING.ROLE_SUBTITLE")),t(3),S(" ",p(9,8,"ONBOARDING.PATIENT")," "),t(3),S(" ",p(12,10,"ONBOARDING.PROVIDER")," "))}function ie(l,u){if(l&1){let i=f();n(0,"div",4)(1,"h1"),r(2),d(3,"translate"),o(),n(4,"ion-item")(5,"ion-label"),r(6),d(7,"translate"),o(),n(8,"ion-select",7),I("ngModelChange",function(e){g(i);let a=c();return v(a.language,e)||(a.language=e),m(e)}),n(9,"ion-select-option",8),r(10,"English"),o(),n(11,"ion-select-option",9),r(12,"Espa\xF1ol"),o(),n(13,"ion-select-option",10),r(14,"Fran\xE7ais"),o(),n(15,"ion-select-option",11),r(16,"Deutsch"),o(),n(17,"ion-select-option",12),r(18,"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"),o(),n(19,"ion-select-option",13),r(20,"\u0641\u0627\u0631\u0633\u06CC"),o(),n(21,"ion-select-option",14),r(22,"\u0627\u0631\u062F\u0648"),o()()(),n(23,"ion-button",5),O("click",function(){g(i);let e=c();return m(e.nextStep())}),r(24),d(25,"translate"),o()()}if(l&2){let i=c();t(2),_(p(3,4,"ONBOARDING.LANGUAGE_TITLE")),t(4),_(p(7,6,"ONBOARDING.LANGUAGE_TITLE")),t(2),h("ngModel",i.language),t(16),S(" ",p(25,8,"COMMON.NEXT")," ")}}function ne(l,u){if(l&1){let i=f();n(0,"ion-item")(1,"ion-label",15),r(2),d(3,"translate"),o(),n(4,"ion-input",7),I("ngModelChange",function(e){g(i);let a=c(3);return v(a.hospital,e)||(a.hospital=e),m(e)}),o()()}if(l&2){let i=c(3);t(2),_(p(3,2,"ONBOARDING.HOSPITAL")),t(2),h("ngModel",i.hospital)}}function oe(l,u){if(l&1){let i=f();n(0,"div",21)(1,"ion-item")(2,"ion-label"),r(3),d(4,"translate"),o(),n(5,"ion-select",7),I("ngModelChange",function(e){g(i);let a=c(2);return v(a.providerKind,e)||(a.providerKind=e),m(e)}),n(6,"ion-select-option",22),r(7),d(8,"translate"),o(),n(9,"ion-select-option",23),r(10),d(11,"translate"),o(),n(12,"ion-select-option",24),r(13),d(14,"translate"),o(),n(15,"ion-select-option",25),r(16),d(17,"translate"),o(),n(18,"ion-select-option",26),r(19),d(20,"translate"),o()()(),w(21,ne,5,4,"ion-item",27),o()}if(l&2){let i=c(2);t(3),_(p(4,8,"ONBOARDING.PROVIDER_KIND")),t(2),h("ngModel",i.providerKind),t(2),_(p(8,10,"ONBOARDING.DOCTOR")),t(3),_(p(11,12,"ONBOARDING.NURSE")),t(3),_(p(14,14,"ONBOARDING.FAMILY")),t(3),_(p(17,16,"ONBOARDING.FRIEND")),t(3),_(p(20,18,"ONBOARDING.CAREGIVER")),t(2),x("ngIf",i.providerKind==="doctor"||i.providerKind==="nurse")}}function ae(l,u){if(l&1){let i=f();n(0,"div",4)(1,"h1"),r(2),d(3,"translate"),o(),n(4,"ion-item")(5,"ion-label",15),r(6),d(7,"translate"),o(),n(8,"ion-input",7),I("ngModelChange",function(e){g(i);let a=c();return v(a.firstName,e)||(a.firstName=e),m(e)}),o()(),n(9,"ion-item")(10,"ion-label",15),r(11),d(12,"translate"),o(),n(13,"ion-input",7),I("ngModelChange",function(e){g(i);let a=c();return v(a.lastName,e)||(a.lastName=e),m(e)}),o()(),n(14,"ion-item")(15,"ion-label",15),r(16),d(17,"translate"),o(),n(18,"ion-input",16),I("ngModelChange",function(e){g(i);let a=c();return v(a.age,e)||(a.age=e),m(e)}),o()(),n(19,"ion-item")(20,"ion-label"),r(21),d(22,"translate"),o(),n(23,"ion-select",7),I("ngModelChange",function(e){g(i);let a=c();return v(a.gender,e)||(a.gender=e),m(e)}),n(24,"ion-select-option",17),r(25),d(26,"translate"),o(),n(27,"ion-select-option",18),r(28),d(29,"translate"),o()()(),n(30,"ion-item")(31,"ion-label",15),r(32),d(33,"translate"),o(),n(34,"ion-input",7),I("ngModelChange",function(e){g(i);let a=c();return v(a.country,e)||(a.country=e),m(e)}),o()(),n(35,"ion-item")(36,"ion-label",15),r(37),d(38,"translate"),o(),n(39,"ion-input",7),I("ngModelChange",function(e){g(i);let a=c();return v(a.city,e)||(a.city=e),m(e)}),o()(),w(40,oe,22,20,"div",19),n(41,"ion-button",20),O("click",function(){g(i);let e=c();return m(e.nextStep())}),r(42),d(43,"translate"),o()()}if(l&2){let i=c();t(2),_(p(3,18,"ONBOARDING.PROFILE_TITLE")),t(4),_(p(7,20,"ONBOARDING.FIRST_NAME")),t(2),h("ngModel",i.firstName),t(3),_(p(12,22,"ONBOARDING.LAST_NAME")),t(2),h("ngModel",i.lastName),t(3),_(p(17,24,"ONBOARDING.AGE")),t(2),h("ngModel",i.age),t(3),_(p(22,26,"ONBOARDING.GENDER")),t(2),h("ngModel",i.gender),t(2),_(p(26,28,"ONBOARDING.MALE")),t(3),_(p(29,30,"ONBOARDING.FEMALE")),t(4),_(p(33,32,"ONBOARDING.COUNTRY")),t(2),h("ngModel",i.country),t(3),_(p(38,34,"ONBOARDING.CITY")),t(2),h("ngModel",i.city),t(),x("ngIf",i.role==="provider"),t(),x("disabled",!i.firstName||!i.lastName),t(),S(" ",p(43,36,"COMMON.NEXT")," ")}}function re(l,u){l&1&&(n(0,"h1"),r(1),d(2,"translate"),o()),l&2&&(t(),_(p(2,1,"ONBOARDING.CONDITIONS_TITLE")))}function le(l,u){l&1&&(n(0,"p"),r(1),d(2,"translate"),o()),l&2&&(t(),_(p(2,1,"ONBOARDING.CONDITIONS_SUBTITLE")))}function de(l,u){if(l&1){let i=f();n(0,"ion-chip",32),O("click",function(){let e=g(i).$implicit,a=c(3);return m(a.toggleCondition(e))}),r(1),o()}if(l&2){let i=u.$implicit,s=c(3);x("color",s.conditions.includes(i)?"primary":"medium"),t(),S(" ",i," ")}}function pe(l,u){if(l&1&&(n(0,"div",30),w(1,de,2,2,"ion-chip",31),o()),l&2){let i=c(2);t(),x("ngForOf",i.availableConditions)}}function se(l,u){if(l&1){let i=f();n(0,"div",4),w(1,re,3,3,"h1",27)(2,le,3,3,"p",27)(3,pe,2,1,"div",28),n(4,"ion-button",5),O("click",function(){g(i);let e=c();return m(e.nextStep())}),r(5),d(6,"translate"),o(),n(7,"ion-button",29),O("click",function(){g(i);let e=c();return m(e.skip())}),r(8),d(9,"translate"),o()()}if(l&2){let i=c();t(),x("ngIf",i.role==="patient"),t(),x("ngIf",i.role==="patient"),t(),x("ngIf",i.role==="patient"),t(2),S(" ",p(6,5,"COMMON.NEXT")," "),t(3),S(" ",p(9,7,"ONBOARDING.SKIP")," ")}}function ce(l,u){l&1&&C(0,"ion-spinner",37)}function _e(l,u){l&1&&(n(0,"span"),r(1),d(2,"translate"),o()),l&2&&(t(),_(p(2,1,"COMMON.SAVE")))}function ge(l,u){if(l&1){let i=f();n(0,"div",4)(1,"h1"),r(2),d(3,"translate"),o(),n(4,"ion-item")(5,"ion-label",15),r(6),d(7,"translate"),o(),n(8,"ion-input",33),I("ngModelChange",function(e){g(i);let a=c();return v(a.height,e)||(a.height=e),m(e)}),o()(),n(9,"ion-item")(10,"ion-label",15),r(11),d(12,"translate"),o(),n(13,"ion-input",34),I("ngModelChange",function(e){g(i);let a=c();return v(a.weight,e)||(a.weight=e),m(e)}),o()(),n(14,"ion-item")(15,"ion-label",15),r(16),d(17,"translate"),o(),n(18,"ion-input",16),I("ngModelChange",function(e){g(i);let a=c();return v(a.systolic,e)||(a.systolic=e),m(e)}),o()(),n(19,"ion-item")(20,"ion-label",15),r(21),d(22,"translate"),o(),n(23,"ion-input",16),I("ngModelChange",function(e){g(i);let a=c();return v(a.diastolic,e)||(a.diastolic=e),m(e)}),o()(),n(24,"ion-button",20),O("click",function(){g(i);let e=c();return m(e.completeOnboarding())}),w(25,ce,1,0,"ion-spinner",35)(26,_e,3,3,"span",27),o(),n(27,"ion-button",36),O("click",function(){g(i);let e=c();return m(e.skip())}),r(28),d(29,"translate"),o()()}if(l&2){let i=c();t(2),_(p(3,14,"ONBOARDING.INITIAL_METRICS")),t(4),_(p(7,16,"ONBOARDING.HEIGHT")),t(2),h("ngModel",i.height),t(3),_(p(12,18,"ONBOARDING.WEIGHT")),t(2),h("ngModel",i.weight),t(3),_(p(17,20,"ONBOARDING.SYSTOLIC")),t(2),h("ngModel",i.systolic),t(3),_(p(22,22,"ONBOARDING.DIASTOLIC")),t(2),h("ngModel",i.diastolic),t(),x("disabled",i.loading),t(),x("ngIf",i.loading),t(),x("ngIf",!i.loading),t(),x("disabled",i.loading),t(),S(" ",p(29,24,"ONBOARDING.SKIP")," ")}}var Ce=(()=>{let u=class u{constructor(s,e,a,$,ee){this.authService=s,this.profileService=e,this.observationService=a,this.i18nService=$,this.router=ee,this.currentStep="role",this.loading=!1,this.role=null,this.language="en",this.firstName="",this.lastName="",this.age=null,this.gender=null,this.country="",this.city="",this.providerKind=null,this.hospital="",this.conditions=[],this.availableConditions=["Hypertension","Diabetes","Heart Problems","Stress","Headache","Back Pain","Obesity","Depression","Respiratory Issues"],this.height=null,this.weight=null,this.systolic=null,this.diastolic=null}ngOnInit(){return b(this,null,function*(){this.user=this.authService.getCurrentUser(),this.user||this.router.navigate(["/auth"])})}nextStep(){this.currentStep==="role"?this.currentStep="language":this.currentStep==="language"?(this.i18nService.setLanguage(this.language),this.currentStep="profile"):this.currentStep==="profile"?this.role==="provider"?this.currentStep="conditions":this.currentStep="conditions":this.currentStep==="conditions"?this.currentStep="initial-metrics":this.currentStep==="initial-metrics"&&this.completeOnboarding()}toggleCondition(s){let e=this.conditions.indexOf(s);e>-1?this.conditions.splice(e,1):this.conditions.push(s)}completeOnboarding(){return b(this,null,function*(){if(!this.user)return;this.loading=!0;let s={id:this.user.id,email:this.user.email||"",role:this.role,language:this.language,first_name:this.firstName,last_name:this.lastName,age:this.age||void 0,gender:this.gender||void 0,country:this.country||void 0,city:this.city||void 0,provider_kind:this.providerKind||void 0,hospital:this.hospital||void 0,conditions:this.role==="patient"?this.conditions:void 0,height_cm:this.height||void 0};yield this.profileService.createProfile(s),this.systolic&&this.diastolic&&(yield this.observationService.createObservation({user_id:this.user.id,metric:"bp",ts:new Date().toISOString(),systolic:this.systolic,diastolic:this.diastolic})),this.weight&&(yield this.observationService.createObservation({user_id:this.user.id,metric:"weight",ts:new Date().toISOString(),numeric_value:this.weight,unit:"kg"})),this.loading=!1,this.router.navigate(["/tour"])})}skip(){this.currentStep==="initial-metrics"?this.completeOnboarding():this.nextStep()}};u.\u0275fac=function(e){return new(e||u)(y(q),y(J),y(Q),y(Z),y(M))},u.\u0275cmp=N({type:u,selectors:[["app-onboarding"]],decls:12,vars:10,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],[1,"onboarding-container"],["class","step",4,"ngIf"],[1,"step"],["expand","block",1,"ion-margin-top",3,"click"],["expand","block","fill","outline",1,"ion-margin-top",3,"click"],[3,"ngModelChange","ngModel"],["value","en"],["value","es"],["value","fr"],["value","de"],["value","ar"],["value","fa"],["value","ur"],["position","stacked"],["type","number",3,"ngModelChange","ngModel"],["value","male"],["value","female"],["class","ion-margin-top",4,"ngIf"],["expand","block",1,"ion-margin-top",3,"click","disabled"],[1,"ion-margin-top"],["value","doctor"],["value","nurse"],["value","family"],["value","friend"],["value","caregiver"],[4,"ngIf"],["class","conditions-grid",4,"ngIf"],["expand","block","fill","clear",1,"ion-margin-top",3,"click"],[1,"conditions-grid"],[3,"color","click",4,"ngFor","ngForOf"],[3,"click","color"],["type","number","placeholder","cm",3,"ngModelChange","ngModel"],["type","number","placeholder","kg",3,"ngModelChange","ngModel"],["name","crescent",4,"ngIf"],["expand","block","fill","clear",1,"ion-margin-top",3,"click","disabled"],["name","crescent"]],template:function(e,a){e&1&&(n(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),r(3),d(4,"translate"),o()()(),n(5,"ion-content",1)(6,"div",2),w(7,te,13,12,"div",3)(8,ie,26,10,"div",3)(9,ae,44,38,"div",3)(10,se,10,9,"div",3)(11,ge,30,26,"div",3),o()()),e&2&&(x("translucent",!0),t(3),_(p(4,8,"ONBOARDING.PROFILE_TITLE")),t(2),x("fullscreen",!0),t(2),x("ngIf",a.currentStep==="role"),t(),x("ngIf",a.currentStep==="language"),t(),x("ngIf",a.currentStep==="profile"),t(),x("ngIf",a.currentStep==="conditions"),t(),x("ngIf",a.currentStep==="initial-metrics"))},dependencies:[T,E,B,A,P,V,G,W,H,U,R,j,k,L,Y,F,D,K,z,X],styles:[".onboarding-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.step[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:600;margin-bottom:.5rem}.step[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-text-color);opacity:.7;margin-bottom:2rem}.conditions-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}"]});let l=u;return l})();export{Ce as OnboardingPage};
