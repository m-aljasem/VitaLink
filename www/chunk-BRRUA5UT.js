import{a as d}from"./chunk-FEUMV7UB.js";import{f as c}from"./chunk-IPUYINSA.js";import{g as i}from"./chunk-2R6CW7ES.js";var m=(()=>{let r=class r{constructor(){this.supabase=d()}createObservation(e){return i(this,null,function*(){let{data:t,error:a}=yield this.supabase.from("observations").insert(e).select().single();return{data:t,error:a}})}getObservationsByMetric(e,t,a=100){return i(this,null,function*(){let{data:s,error:n}=yield this.supabase.from("observations").select("*").eq("user_id",e).eq("metric",t).order("ts",{ascending:!1}).limit(a);return{data:s,error:n}})}getAllObservations(e,t=100){return i(this,null,function*(){let{data:a,error:s}=yield this.supabase.from("observations").select("*").eq("user_id",e).order("ts",{ascending:!1}).limit(t);return{data:a,error:s}})}getLatestObservation(e,t){return i(this,null,function*(){let{data:a,error:s}=yield this.supabase.from("observations").select("*").eq("user_id",e).eq("metric",t).order("ts",{ascending:!1}).limit(1).single();return{data:a,error:s}})}getObservationsForChart(e,t,a=7){return i(this,null,function*(){let s=new Date;s.setDate(s.getDate()-a);let{data:n,error:u}=yield this.supabase.from("observations").select("*").eq("user_id",e).eq("metric",t).gte("ts",s.toISOString()).order("ts",{ascending:!0});return{data:n,error:u}})}deleteObservation(e){return i(this,null,function*(){let{error:t}=yield this.supabase.from("observations").delete().eq("id",e);return{error:t}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"});let o=r;return o})();export{m as a};
