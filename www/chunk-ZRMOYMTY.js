import{a as Z}from"./chunk-ZL5SRYO7.js";import{b as X}from"./chunk-FEUMV7UB.js";import{$ as D,A as y,Aa as Y,Ba as z,F as a,Fa as U,G as s,H as M,J as g,Ja as q,K as u,Ka as J,L as _,M as d,N as p,O as T,Oa as K,P as x,Pa as Q,Q as b,W,_ as A,ba as R,ha as G,i as w,j as E,l as t,n as I,na as L,o as N,oa as k,p as C,pa as F,qa as j,r as h,ra as H,s as n,t as o,va as V,y as B,z as v}from"./chunk-IPUYINSA.js";import"./chunk-QFN5WVFN.js";import"./chunk-7KGURMOZ.js";import"./chunk-C6GHFGSM.js";import"./chunk-4BHFLD23.js";import"./chunk-MFJQPCIH.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as O,g as S}from"./chunk-2R6CW7ES.js";function $(c,m){if(c&1){let P=B();n(0,"ion-chip",13),v("click",function(){let r=w(P).$implicit,e=y(2);return E(e.toggleCondition(r))}),a(1),o()}if(c&2){let P=m.$implicit,l=y(2);h("color",l.editedProfile.conditions!=null&&l.editedProfile.conditions.includes(P)?"primary":"medium"),t(),M(" ",P," ")}}function ee(c,m){if(c&1&&(n(0,"div",10)(1,"h3"),a(2),d(3,"translate"),o(),n(4,"div",11),C(5,$,2,2,"ion-chip",12),o()()),c&2){let P=y();t(2),s(p(3,2,"ONBOARDING.CONDITIONS_TITLE")),t(3),h("ngForOf",P.availableConditions)}}var fe=(()=>{let m=class m{constructor(l,r,e,f){this.authService=l,this.profileService=r,this.router=e,this.toastController=f,this.profile=null,this.editedProfile={},this.availableConditions=["Hypertension","Diabetes","Heart Problems","Stress","Headache","Back Pain","Obesity","Depression","Respiratory Issues"]}ngOnInit(){return S(this,null,function*(){this.profile=yield this.authService.getCurrentProfile(),this.profile&&(this.editedProfile=O({},this.profile))})}toggleCondition(l){let r=this.editedProfile.conditions||[],e=r.indexOf(l);e>-1?r.splice(e,1):r.push(l),this.editedProfile.conditions=r}save(){return S(this,null,function*(){if(!this.profile)return;let{error:l}=yield this.profileService.updateProfile(this.profile.id,this.editedProfile);l?yield(yield this.toastController.create({message:"Failed to update profile",duration:2e3,color:"danger"})).present():(yield(yield this.toastController.create({message:"Profile updated",duration:2e3,color:"success"})).present(),yield this.authService.loadProfile(this.profile.id),this.router.navigate(["/tabs/settings"]))})}};m.\u0275fac=function(r){return new(r||m)(I(X),I(Z),I(W),I(U))},m.\u0275cmp=N({type:m,selectors:[["app-profile"]],decls:47,vars:39,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],[1,"profile-container"],["position","stacked"],[3,"ngModelChange","ngModel"],["type","number",3,"ngModelChange","ngModel"],["value","male"],["value","female"],["class","conditions-section ion-margin-top",4,"ngIf"],["expand","block",1,"ion-margin-top",3,"click"],[1,"conditions-section","ion-margin-top"],[1,"conditions-grid"],[3,"color","click",4,"ngFor","ngForOf"],[3,"click","color"]],template:function(r,e){r&1&&(n(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),a(3),d(4,"translate"),o()()(),n(5,"ion-content",1)(6,"div",2)(7,"ion-item")(8,"ion-label",3),a(9),d(10,"translate"),o(),n(11,"ion-input",4),_("ngModelChange",function(i){return u(e.editedProfile.first_name,i)||(e.editedProfile.first_name=i),i}),o()(),n(12,"ion-item")(13,"ion-label",3),a(14),d(15,"translate"),o(),n(16,"ion-input",4),_("ngModelChange",function(i){return u(e.editedProfile.last_name,i)||(e.editedProfile.last_name=i),i}),o()(),n(17,"ion-item")(18,"ion-label",3),a(19),d(20,"translate"),o(),n(21,"ion-input",5),_("ngModelChange",function(i){return u(e.editedProfile.age,i)||(e.editedProfile.age=i),i}),o()(),n(22,"ion-item")(23,"ion-label"),a(24),d(25,"translate"),o(),n(26,"ion-select",4),_("ngModelChange",function(i){return u(e.editedProfile.gender,i)||(e.editedProfile.gender=i),i}),n(27,"ion-select-option",6),a(28),d(29,"translate"),o(),n(30,"ion-select-option",7),a(31),d(32,"translate"),o()()(),n(33,"ion-item")(34,"ion-label",3),a(35),d(36,"translate"),o(),n(37,"ion-input",4),_("ngModelChange",function(i){return u(e.editedProfile.country,i)||(e.editedProfile.country=i),i}),o()(),n(38,"ion-item")(39,"ion-label",3),a(40),d(41,"translate"),o(),n(42,"ion-input",4),_("ngModelChange",function(i){return u(e.editedProfile.city,i)||(e.editedProfile.city=i),i}),o()(),C(43,ee,6,4,"div",8),n(44,"ion-button",9),v("click",function(){return e.save()}),a(45),d(46,"translate"),o()()()),r&2&&(h("translucent",!0),t(3),s(p(4,19,"SETTINGS.PROFILE")),t(2),h("fullscreen",!0),t(4),s(p(10,21,"ONBOARDING.FIRST_NAME")),t(2),g("ngModel",e.editedProfile.first_name),t(3),s(p(15,23,"ONBOARDING.LAST_NAME")),t(2),g("ngModel",e.editedProfile.last_name),t(3),s(p(20,25,"ONBOARDING.AGE")),t(2),g("ngModel",e.editedProfile.age),t(3),s(p(25,27,"ONBOARDING.GENDER")),t(2),g("ngModel",e.editedProfile.gender),t(2),s(p(29,29,"ONBOARDING.MALE")),t(3),s(p(32,31,"ONBOARDING.FEMALE")),t(4),s(p(36,33,"ONBOARDING.COUNTRY")),t(2),g("ngModel",e.editedProfile.country),t(3),s(p(41,35,"ONBOARDING.CITY")),t(2),g("ngModel",e.editedProfile.city),t(),h("ngIf",(e.profile==null?null:e.profile.role)==="patient"),t(2),M(" ",p(46,37,"COMMON.SAVE")," "))},dependencies:[b,T,x,R,A,D,k,F,Y,z,G,q,j,H,J,V,L,Q,K],styles:[".profile-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}.conditions-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin-bottom:1rem}.conditions-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}"]});let c=m;return c})();export{fe as ProfilePage};
