import{b as F}from"./chunk-FEUMV7UB.js";import{$ as A,Aa as U,Ba as k,F as m,Fa as j,G as c,J as C,Ja as D,K as M,L as y,M as s,N as p,Oa as N,P as T,Pa as q,Q as P,W as b,_ as E,ba as S,ha as x,l as t,n as u,o as f,oa as w,p as I,pa as O,qa as B,r as l,ra as L,s as o,t as r,u as _,wa as H,z as v}from"./chunk-IPUYINSA.js";import"./chunk-QFN5WVFN.js";import"./chunk-7KGURMOZ.js";import"./chunk-C6GHFGSM.js";import"./chunk-4BHFLD23.js";import"./chunk-MFJQPCIH.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{g as h}from"./chunk-2R6CW7ES.js";function W(i,n){i&1&&_(0,"ion-spinner",10)}function z(i,n){i&1&&(o(0,"span"),m(1),s(2,"translate"),r()),i&2&&(t(),c(p(2,1,"AUTH.REQUEST_CODE")))}var ie=(()=>{let n=class n{constructor(d,a,e){this.authService=d,this.router=a,this.toastController=e,this.email="",this.loading=!1}requestCode(){return h(this,null,function*(){if(!this.email||!this.email.includes("@")){yield(yield this.toastController.create({message:"Please enter a valid email",duration:2e3,color:"danger"})).present();return}this.loading=!0;let{error:d}=yield this.authService.requestOTP(this.email);this.loading=!1,d?yield(yield this.toastController.create({message:d.message||"Failed to send code",duration:3e3,color:"danger"})).present():this.router.navigate(["/auth/verify"],{state:{email:this.email}})})}};n.\u0275fac=function(a){return new(a||n)(u(F),u(b),u(j))},n.\u0275cmp=f({type:n,selectors:[["app-auth"]],decls:24,vars:22,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],[1,"auth-container"],[1,"auth-header"],[1,"auth-form"],["position","stacked"],["type","email",3,"ngModelChange","ngModel","placeholder","disabled"],["expand","block",1,"ion-margin-top",3,"click","disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],["name","crescent"]],template:function(a,e){a&1&&(o(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),m(3),s(4,"translate"),r()()(),o(5,"ion-content",1)(6,"div",2)(7,"div",3)(8,"h1"),m(9),s(10,"translate"),r(),o(11,"p"),m(12),s(13,"translate"),r()(),o(14,"div",4)(15,"ion-item")(16,"ion-label",5),m(17),s(18,"translate"),r(),o(19,"ion-input",6),s(20,"translate"),y("ngModelChange",function(g){return M(e.email,g)||(e.email=g),g}),r()(),o(21,"ion-button",7),v("click",function(){return e.requestCode()}),I(22,W,1,0,"ion-spinner",8)(23,z,3,3,"span",9),r()()()()),a&2&&(l("translucent",!0),t(3),c(p(4,12,"APP_NAME")),t(2),l("fullscreen",!0),t(4),c(p(10,14,"AUTH.TITLE")),t(3),c(p(13,16,"AUTH.SUBTITLE")),t(5),c(p(18,18,"AUTH.EMAIL")),t(2),C("ngModel",e.email),l("placeholder",p(20,20,"AUTH.EMAIL_PLACEHOLDER"))("disabled",e.loading),t(2),l("disabled",e.loading||!e.email),t(),l("ngIf",e.loading),t(),l("ngIf",!e.loading))},dependencies:[P,T,S,E,A,w,O,U,k,x,D,B,L,H,q,N],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;min-height:100%;max-width:400px;margin:0 auto}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;color:var(--ion-color-primary);margin-bottom:.5rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-text-color);opacity:.7}.auth-form[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: #f9fafb;--border-radius: 12px;margin-bottom:1rem}"]});let i=n;return i})();export{ie as AuthPage};
