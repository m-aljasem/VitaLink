<ion-content [fullscreen]="true" class="reminders-content">
  <div class="reminders-container ion-padding">
    <div class="back-button-wrapper">
      <ion-button fill="clear" (click)="goBack()" class="back-button">
        <ion-icon name="arrow-back" slot="start"></ion-icon>
        Back
      </ion-button>
    </div>
    <div class="reminders-header">
      <div class="header-icon">
        <ion-icon name="notifications"></ion-icon>
      </div>
      <h1>{{ 'SETTINGS.REMINDERS' | translate }}</h1>
      <p class="subtitle">Set up health reminders and notifications</p>
    </div>

    <ion-button expand="block" (click)="showAddModal = true" class="add-button">
      <ion-icon name="add-circle" slot="start"></ion-icon>
      {{ 'SETTINGS.ADD_REMINDER' | translate }}
    </ion-button>

    <div class="reminders-list" *ngIf="reminders.length > 0">
      <ion-card *ngFor="let reminder of reminders" class="reminder-card">
        <ion-card-content>
          <div class="reminder-header">
            <div class="reminder-icon-wrapper">
              <ion-icon name="time"></ion-icon>
            </div>
            <div class="reminder-info">
              <h3>{{ reminder.title }}</h3>
              <p class="reminder-time">
                <ion-icon name="time-outline"></ion-icon>
                {{ reminder.local_time }}
              </p>
              <div class="reminder-days">
                <ion-chip *ngFor="let day of reminder.days" size="small" class="day-chip">
                  {{ day }}
                </ion-chip>
              </div>
            </div>
            <div class="reminder-actions">
              <ion-toggle
                [checked]="reminder.enabled"
                (ionChange)="toggleReminder(reminder)"
                class="reminder-toggle"
              ></ion-toggle>
              <ion-button fill="clear" class="delete-button" (click)="deleteReminder(reminder)">
                <ion-icon name="trash"></ion-icon>
              </ion-button>
            </div>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <div class="empty-state" *ngIf="reminders.length === 0">
      <ion-icon name="notifications-outline" class="empty-icon"></ion-icon>
      <ion-text color="medium">
        {{ 'SETTINGS.NO_REMINDERS' | translate }}
      </ion-text>
    </div>
  </div>

  <!-- Add Reminder Modal -->
  <ion-modal [isOpen]="showAddModal" (didDismiss)="showAddModal = false">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>{{ 'SETTINGS.ADD_REMINDER' | translate }}</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="showAddModal = false">{{ 'COMMON.CLOSE' | translate }}</ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <ion-item>
          <ion-label position="stacked">{{ 'SETTINGS.REMINDER_TITLE' | translate }}</ion-label>
          <ion-input [(ngModel)]="newReminder.title"></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">{{ 'SETTINGS.TIME' | translate }}</ion-label>
          <ion-datetime
            presentation="time"
            [(ngModel)]="newReminder.local_time"
          ></ion-datetime>
        </ion-item>

        <div class="days-section">
          <p>{{ 'SETTINGS.DAYS' | translate }}</p>
          <div class="days-grid">
            <ion-checkbox
              *ngFor="let day of daysOfWeek"
              [checked]="newReminder.days?.includes(day.value)"
              (ionChange)="toggleDay(day.value)"
            >
              {{ day.label | translate }}
            </ion-checkbox>
          </div>
        </div>

        <ion-button expand="block" (click)="saveReminder()" class="ion-margin-top">
          {{ 'COMMON.SAVE' | translate }}
        </ion-button>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>

